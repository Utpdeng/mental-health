"use strict";(self["webpackChunkmental_health_ui"]=self["webpackChunkmental_health_ui"]||[]).push([[243],{4349:function(t,e,s){s.d(e,{A:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo-wrapper"},[e("svg",{staticClass:"logo",attrs:{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"50",cy:"50",r:"45",fill:"currentColor",opacity:"0.2"}}),e("path",{attrs:{d:"M50 20c-16.569 0-30 13.431-30 30 0 16.569 13.431 30 30 30 16.569 0 30-13.431 30-30C80 33.431 66.569 20 50 20zm0 5c13.807 0 25 11.193 25 25S63.807 75 50 75 25 63.807 25 50s11.193-25 25-25z",fill:"currentColor"}}),e("path",{attrs:{d:"M50 35c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15z",fill:"currentColor"}})]),t.showText?e("span",{staticClass:"logo-text"},[t._v("校园心理健康平台")]):t._e()])},a=[],o={name:"Logo",props:{showText:{type:Boolean,default:!0}}},i=o,n=s(1656),l=(0,n.A)(i,r,a,!1,null,"13572bd0",null),c=l.exports},1243:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-layout"},[e("header",{staticClass:"app-header",class:{"header-shadow":t.scrolled}},[e("div",{staticClass:"header-content"},[e("div",{staticClass:"logo"},[e("Logo")],1),e("nav",{staticClass:"nav-menu"},[e("el-menu",{attrs:{mode:"horizontal",router:!0,"default-active":t.activeMenu}},[e("el-menu-item",{attrs:{index:"/"}},[t._v("首页")]),e("el-menu-item",{attrs:{index:"/services"}},[t._v("服务项目")]),e("el-menu-item",{attrs:{index:"/about"}},[t._v("关于我们")]),e("el-menu-item",{attrs:{index:"/resources"}},[t._v("联系资源")]),t.isLoggedIn?[e("el-submenu",{attrs:{index:"workspace"}},[e("template",{slot:"title"},[t._v("工作台")]),t.isAdmin?e("el-menu-item",{attrs:{index:"/admin"}},[t._v("管理控制台")]):t._e(),t.isTeacher?e("el-menu-item",{attrs:{index:"/teacher"}},[t._v("教师工作台")]):t._e(),t.isStudent?e("el-menu-item",{attrs:{index:"/student"}},[t._v("学生中心")]):t._e()],2)]:t._e()],2)],1),e("div",{staticClass:"header-right"},[t.isLoggedIn?e("el-dropdown",{on:{command:t.handleCommand}},[e("span",{staticClass:"el-dropdown-link"},[e("el-avatar",{attrs:{size:32,src:t.userAvatar}}),e("span",{staticClass:"username"},[t._v(t._s(t.username))]),e("i",{staticClass:"el-icon-arrow-down"})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"profile"}},[t._v("个人信息")]),e("el-dropdown-item",{attrs:{command:"settings"}},[t._v("设置")]),e("el-dropdown-item",{attrs:{divided:"",command:"logout"}},[t._v("退出登录")])],1)],1):e("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:t.login}},[e("i",{staticClass:"el-icon-user"}),t._v(" 登录 ")])],1)])]),e("main",{staticClass:"app-main"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1),e("footer",{staticClass:"app-footer"},[e("div",{staticClass:"footer-content"},[e("p",[t._v("© "+t._s(t.currentYear)+" 校园心理健康平台. All rights reserved.")])])])])},a=[],o=(s(4114),s(4349)),i=s(3518),n={name:"Layout",components:{Logo:o.A},data(){return{scrolled:!1,currentYear:(new Date).getFullYear()}},computed:{...(0,i.L8)("permission",["isLoggedIn"]),username(){return this.$store.state.permission.user?.name||""},userAvatar(){return this.$store.state.permission.user?.avatar||""},isAdmin(){return"admin"===this.$store.state.permission.user?.role},isTeacher(){return"teacher"===this.$store.state.permission.user?.role},isStudent(){return"student"===this.$store.state.permission.user?.role},activeMenu(){return this.$route.path}},methods:{async handleCommand(t){switch(t){case"profile":await this.$router.push("/profile").catch((()=>{}));break;case"settings":await this.$router.push("/settings").catch((()=>{}));break;case"logout":try{await this.$store.dispatch("permission/logout"),this.$route.meta.requiresAuth?await this.$router.push("/login").catch((()=>{})):"/"===this.$route.path?this.$forceUpdate():await this.$router.push("/").catch((()=>{}))}catch(e){console.error("Logout error:",e),this.$message.error("退出登录失败，请重试")}break}},login(){this.$router.push("/login").catch((()=>{}))},handleScroll(){this.scrolled=window.scrollY>0}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)}},l=n,c=s(1656),u=(0,c.A)(l,r,a,!1,null,"056db8e8",null),d=u.exports}}]);
//# sourceMappingURL=243.5bcfee17.js.map